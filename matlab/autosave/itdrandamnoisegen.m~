%
%function [Xl,Xr]=itdrandamnoisegen(f1,f2,ITDMax,Fmb,Fs,M,seed,seed2)
%
%       FILE NAME       : ITD RAND AM NOISE GEN
%       DESCRIPTION     : 
%
%       f1              : Lower noise cutoff frequency (Hz)
%       f2              : Upper noise cutoff frequency (Hz)
%       ITDMax          : Maximum ITD (micro sec)
%       Fmb             : ITD Upper Beat Frequency (Hz)
%       Fs              : Sampling Frequency
%       M               : Number of Samples
%       seed            : Seed for random number generator
%                         (Default = no seed)
%       seed2 
%
% (C) Monty A. Escabi, Jan 2009
%
function [Xl,Xr]=itdrandamnoisegen(f1,f2,ITDMax,Fmb,Fs,M,seed,seed2)

%Input Arguments
if nargin<7
    seed=sum(100*clock);
end
pause(.5)
if nargin<8
    seed2=sum(1000*clock);
end

%Time Axis and warped time axis. ITDs are generated by time warping the 
%signal for the left and right audio channels
t=(1:M)/Fs;
[ITD]=noiseunif(Fmb,Fs,M,seed2);
tpl=t+ITDMax/1E6/2*(ITD*2-1);
tpr=t-ITDMax/1E6/2*(ITD*2-1);

%Gaussian Bandlimited Noise
%X=noiseblfft(f1,f2,Fs,M);
X=noiseblh(f1,f2,Fs,M,seed,'y');

%Time Warping the left and right sounds
Xl=interp1(tpl,X,t,'cubic');
Xr=interp1(tpr,X,t,'cubic');